!function(n){var i={direction:"forward",flipDirection:"bottom",selector:"> a",spacing:10,showMaximum:15,enableScroll:!0,autoplay:!1};n.fn.flipping_gallery=function(a){function t(n,i){deltaOfInterest=i;var a=(new Date).getTime();a-l<f+e.animationTime?n.preventDefault():(deltaOfInterest<0?o.flipForward():o.flipBackward(),l=a)}var e=n.extend({},i,a),o=n(this),s=o.find(e.selector).length,r=0,c=.5/s,d=1/s,l=0,f=500;s>e.showMaximum&&(d=1/e.showMaximum),o.addClass("fg-body"),n.fn.realignCards=function(){var i=n(this);n.each(i.find(e.selector),function(a){0==a&&(n(this).addClass("active "+e.flipDirection),i.find(".fg-caption").remove(),n(this).data("caption")&&(i.append("<div class='fg-caption' style='opacity: 0;'>"+n(this).attr("data-caption")+"</div>"),i.find(".fg-caption").css({opacity:"1"}))),r+=e.spacing,new_scale=1-c*a,new_opacity=1-d*a,a>=e.showMaximum?n(this).css("opacity",0):n(this).css("opacity",1),n(this).addClass("animate fg-card").css({"z-index":5-a,"margin-top":"-"+r+"px","-webkit-transform":"scale("+new_scale+")","-moz-transform":"scale("+new_scale+")","-o-transform":"scale("+new_scale+")",transform:"scale("+new_scale+")",opacity:new_opacity}),n(this).click(function(){return!1})}),i.find("> .fg-card.active").click(function(){return"forward"==e.direction?i.flipForward():i.flipBackward(),!1})},n.fn.flipForward=function(){if(!o.hasClass("animating")){o.addClass("animating"),o.find(".fg-caption").remove();var n=o.find("> .fg-card").first();n.addClass("fg-flipping").css("opacity","0"),n.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(i){var a=n.removeClass("animate active fg-flipping [class^='fg-count-'] "+e.flipDirection).clone();n.remove(),o.append(a.hide()),o.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(n){r=0,o.realignCards()}),o.find("> .fg-card").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(n){o.find("> .fg-card").fadeIn(),o.removeClass("animating")})})}},n.fn.flipBackward=function(){if(!o.hasClass("animating")){o.addClass("animating");var n=o.find("> .fg-card").last(),i=n.clone();n.remove(),o.find(".active").removeClass("active "+e.flipDirection),o.prepend(i.attr("style","").css({opacity:"0","z-index":"99"}).hide().addClass("active fg-flipping "+e.flipDirection)),o.find("> .fg-card.active").addClass("animate").show().removeClass("fg-flipping").css("opacity","1"),r=0,o.realignCards(),o.find("> .fg-card").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(n){o.removeClass("animating")})}},o.realignCards(),1==e.enableScroll&&n(o).bind("mousewheel DOMMouseScroll",function(n){n.preventDefault(),t(n,n.originalEvent.wheelDelta||-n.originalEvent.detail)}),0!=e.autoplay&&0!=e.autoplay&&setInterval(function(){n(o.selector+":hover").length<1&&o.flipForward()},e.autoplay)}}(window.jQuery);
