!function(e){e.fn.twittie=function(t,a){var r="function"==typeof t?t:a,n=e.extend({username:null,list:null,hashtag:null,count:10,hideReplies:!1,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}",apiPath:"api/tweet.php"},t instanceof Object?t:{});n.list&&!n.username&&e.error("If you want to fetch tweets from a list, you must define the username of the list owner.");var s=function(e){return e.replace(/(https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.]*(\?\S+)?)?)?)/gi,'<a href="$1" target="_blank" title="Visit this link">$1</a>').replace(/#([a-zA-Z0-9_]+)/g,'<a href="http://twitter.com/search?q=%23$1&amp;src=hash" target="_blank" title="Search for #$1">#$1</a>').replace(/@([a-zA-Z0-9_]+)/g,'<a href="http://twitter.com/$1" target="_blank" title="$1 on Twitter">@$1</a>')},i=function(e){for(var t=n.template,a="date tweet avatar url retweeted screen_name user_name".split(" "),r=0,s=a.length;r<s;r++)t=t.replace(new RegExp("{{"+a[r]+"}}","gi"),e[a[r]]);return t};this.html("<span>Loading...</span>");var u=this;e.getJSON(n.apiPath,{username:n.username,list:n.list,hashtag:n.hashtag,count:n.count,exclude_replies:n.hideReplies},function(e){u.find("span").fadeOut("fast",function(){u.html("<ul></ul>");for(var t=0;t<n.count;t++){var a=!1;if(e[t])a=e[t];else{if(void 0===e.statuses||!e.statuses[t])break;a=e.statuses[t]}for(var l=a.user.name,o=(o=a.created_at).split(" "),c=(o=new Date(Date.parse(o[1]+" "+o[2]+", "+o[5]+" "+o[3]+" UTC")),"January February March April May June July August September October November December".split(" ")),h=(o={"%d":o.getDate(),"%m":o.getMonth()+1,"%b":c[o.getMonth()].substr(0,3),"%B":c[o.getMonth()],"%y":String(o.getFullYear()).slice(-2),"%Y":o.getFullYear()},c=n.dateFormat,n.dateFormat.match(/%[dmbByY]/g)),p=0,m=h.length;p<m;p++)c=c.replace(h[p],o[h[p]]);a={user_name:l,date:c,tweet:a.retweeted?s("RT @"+a.user.screen_name+": "+a.retweeted_status.text):s(a.text),avatar:'<img src="'+a.user.profile_image_url+'" />',url:"http://twitter.com/"+a.user.screen_name+"/status/"+a.id_str,retweeted:a.retweeted,screen_name:s("@"+a.user.screen_name)},u.find("ul").append("<li>"+i(a)+"</li>")}"function"==typeof r&&r()})})}}(jQuery);
